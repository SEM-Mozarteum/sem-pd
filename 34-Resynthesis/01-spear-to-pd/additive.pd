#N canvas 345 38 958 770 12;
#X declare -path abs;
#X obj 476 715 dac~;
#X obj 476 667 catch~ sum-bus;
#X obj 59 435 bng 19 250 50 0 empty empty Start\ playback 0 -10 0 12 #00ff04 #000000 #000000;
#X obj 59 525 metro 10;
#X obj 59 483 tgl 17 0 empty end empty 17 7 0 10 #fcfcfc #000000 #000000 0 47800;
#X obj 93 100 openpanel;
#X obj 93 73 bng 19 250 50 0 empty empty Open\ analysis\ file 0 -10 0 12 #00ff04 #000000 #000000;
#X floatatom 92 185 5 0 0 1 partials - - 0;
#X floatatom 201 185 5 0 0 1 frame-count - - 0;
#X obj 201 210 s framecount;
#X msg 144 524 0;
#X floatatom 145 561 5 0 0 0 - - - 0;
#X obj 59 559 f;
#X obj 103 559 + 1;
#X obj 163 610 s time;
#X obj 328 298 vsl 15 101 0.25 4 1 1 empty empty empty 0 -9 0 10 #00ff04 #000000 #000000 5000 1;
#X obj 328 432 s fscale;
#X msg 328 271 1;
#X obj 328 249 loadbang;
#X floatatom 328 408 5 0 0 0 - - - 0;
#X symbolatom 93 128 0 0 0 0 - - - 0;
#X obj 179 455 s fadetime;
#X obj 624 265 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 623 285 s allon;
#X obj 703 265 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 703 285 s alloff;
#X obj 179 296 vsl 15 101 0.25 4 1 1 empty empty empty 0 -9 0 10 #00ff04 #000000 #000000 5000 1;
#X msg 179 269 1;
#X obj 179 247 loadbang;
#X floatatom 179 405 5 0 0 0 - - - 0;
#X obj 179 428 * 10;
#X text 473 647 Gather up audio outputs;
#X text 214 156 Read a SPEAR sinusoidal analysis file;
#X text 475 287 OSCILLATOR BANK;
#X text 85 32 Synthesize a sinusoidal analysis file (from SPEAR) with a bank of sinusoid oscillators., f 100;
#X obj 475 311 mypartial 0;
#X obj 475 331 mypartial 1;
#X obj 475 351 mypartial 2;
#X obj 475 371 mypartial 3;
#X obj 475 411 mypartial 5;
#X obj 475 431 mypartial 6;
#X obj 475 451 mypartial 7;
#X obj 475 471 mypartial 8;
#X obj 475 491 mypartial 9;
#X obj 475 511 mypartial 10;
#X obj 475 531 mypartial 11;
#X obj 475 551 mypartial 12;
#X obj 475 571 mypartial 13;
#X obj 475 591 mypartial 14;
#X obj 475 611 mypartial 15;
#X obj 661 311 mypartial 16;
#X obj 661 331 mypartial 17;
#X obj 661 351 mypartial 18;
#X obj 661 371 mypartial 19;
#X obj 661 391 mypartial 20;
#X obj 661 411 mypartial 21;
#X obj 661 431 mypartial 22;
#X obj 661 451 mypartial 23;
#X obj 661 471 mypartial 24;
#X obj 661 490 mypartial 25;
#X obj 661 511 mypartial 26;
#X obj 661 531 mypartial 27;
#X obj 661 551 mypartial 28;
#X obj 661 571 mypartial 29;
#X obj 661 591 mypartial 30;
#X obj 661 610 mypartial 31;
#X obj 475 391 mypartial 4;
#X obj 711 61 declare -path abs;
#N canvas 212 38 909 797 loadspearfile 1;
#X obj 48 244 list split 2;
#X obj 287 376 list split 3;
#X obj 308 465 unpack 0 1 2;
#X floatatom 212 523 5 0 0 0 - - - 0;
#X obj 143 521 f;
#X obj 176 522 + 1;
#X msg 212 493 0;
#X obj 48 335 list split 1;
#X obj 63 406 f;
#X floatatom 63 428 5 0 0 0 - - - 0;
#X obj 62 361 select partials-count;
#X obj 46 500 f;
#X floatatom 43 567 5 0 0 0 - - - 0;
#X obj 46 453 select frame-count;
#X obj 49 191 textfile;
#X msg 50 102 rewind;
#X obj 92 157 until;
#X obj 91 134 bang;
#X text 139 158 keep sending bangs until we hit EOF;
#X text 121 190 read a line;
#X text 145 560 time counter;
#X text 54 319 header vars;
#X obj 346 443 list;
#X text 303 480 index freq mag;
#X obj 287 398 trigger b b l;
#X obj 89 282 trigger l b;
#X obj 362 503 f;
#X obj 358 553 f;
#X msg 50 55 read \$1 cr;
#X msg 194 666 \; frqarray resize 0 \; frqarray resize \$1 \; magarray resize 0 \; magarray resize \$1 \;;
#X obj 362 527 tabwrite magarray;
#X obj 358 578 tabwrite frqarray;
#X obj 194 635 *;
#X text 191 745 Size arrays as npartials x frames;
#X obj 308 496 *;
#X text 489 579 values are written to entry index x frame-count + time;
#X obj 321 521 +;
#X text 142 245 First two items are either header fields or time and harmonic count, f 69;
#X text 389 441 iterate down list processing three items at a time;
#X obj 50 33 inlet;
#X obj 18 637 outlet;
#X obj 60 603 outlet;
#X text 69 639 partials-count;
#X text 106 603 frame-count;
#X obj 50 78 t b a;
#X obj 102 216 s fileread;
#X text 182 218 tell rest of patch that new file is read;
#X text 99 31 input is name of SPEAR analysis file to read;
#X text 130 53 instruct [textfile] to read it in \, with carriage return line breaks, f 67;
#X text 429 660 loadspearfile.pd;
#X text 430 690 2013-02-20 Dan Ellis dpwe@ee.columbia.edu;
#X text 430 675 Read in data file written by SPEAR;
#X text 298 358 Remaining items in data lines are triples of <idx frq mag>;
#X obj 57 526 print;
#X floatatom 82 384 5 0 0 0 - - - 0;
#X obj 540 495 table frqarray;
#X obj 540 518 table magarray;
#X text 660 511 Tables to hold data;
#X connect 0 0 7 0;
#X connect 0 1 25 0;
#X connect 1 0 24 0;
#X connect 1 1 22 1;
#X connect 2 0 34 0;
#X connect 2 1 27 1;
#X connect 2 2 26 1;
#X connect 3 0 4 1;
#X connect 3 0 36 1;
#X connect 4 0 5 0;
#X connect 5 0 3 0;
#X connect 6 0 3 0;
#X connect 7 0 10 0;
#X connect 7 0 13 0;
#X connect 7 1 54 0;
#X connect 8 0 9 0;
#X connect 9 0 32 1;
#X connect 9 0 40 0;
#X connect 10 0 8 0;
#X connect 11 0 12 0;
#X connect 11 0 53 0;
#X connect 12 0 32 0;
#X connect 12 0 34 1;
#X connect 12 0 41 0;
#X connect 13 0 11 0;
#X connect 13 0 6 0;
#X connect 14 0 0 0;
#X connect 14 1 16 1;
#X connect 14 1 45 0;
#X connect 15 0 14 0;
#X connect 15 0 17 0;
#X connect 16 0 14 0;
#X connect 17 0 16 0;
#X connect 22 0 1 0;
#X connect 24 0 22 0;
#X connect 24 1 26 0;
#X connect 24 1 27 0;
#X connect 24 2 2 0;
#X connect 25 0 1 0;
#X connect 25 1 4 0;
#X connect 26 0 30 0;
#X connect 27 0 31 0;
#X connect 28 0 44 0;
#X connect 32 0 29 0;
#X connect 34 0 36 0;
#X connect 36 0 31 1;
#X connect 36 0 30 1;
#X connect 39 0 28 0;
#X connect 44 0 15 0;
#X connect 44 1 14 0;
#X connect 54 0 8 1;
#X connect 54 0 11 1;
#X restore 92 156 pd loadspearfile;
#N canvas 237 275 419 141 credits 0;
#X text 30 37 2010-02-17 Dan Ellis dpwe@ee.columbia.edu;
#X restore 712 33 pd credits;
#X text 407 233;
#X obj 184 651 r framecount;
#X obj 145 680 select;
#X obj 144 732 s end;
#X msg 144 704 0;
#X text 193 733 s to metro toggle;
#X text 214 609 Detect end \, r in mypartial;
#X text 192 558 update time point for oscillators \, r in mypartial \,, f 30;
#X text 178 478 time base scale \, r in mypartial, f 17;
#X text 320 454 frequency scale \, r in mypartial, f 16;
#X text 295 211 Overall number of analysis frames, f 62;
#X connect 1 0 0 0;
#X connect 1 0 0 1;
#X connect 2 0 4 0;
#X connect 2 0 10 0;
#X connect 3 0 12 0;
#X connect 4 0 3 0;
#X connect 5 0 20 0;
#X connect 6 0 5 0;
#X connect 8 0 9 0;
#X connect 10 0 11 0;
#X connect 11 0 13 0;
#X connect 11 0 14 0;
#X connect 11 0 72 0;
#X connect 12 0 11 0;
#X connect 13 0 12 1;
#X connect 15 0 19 0;
#X connect 17 0 15 0;
#X connect 18 0 17 0;
#X connect 19 0 16 0;
#X connect 20 0 68 0;
#X connect 22 0 23 0;
#X connect 24 0 25 0;
#X connect 26 0 29 0;
#X connect 27 0 26 0;
#X connect 28 0 27 0;
#X connect 29 0 30 0;
#X connect 30 0 21 0;
#X connect 30 0 3 1;
#X connect 68 0 7 0;
#X connect 68 1 8 0;
#X connect 71 0 72 1;
#X connect 72 0 74 0;
#X connect 74 0 73 0;
